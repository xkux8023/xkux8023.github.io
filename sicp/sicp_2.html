<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.2 过程与它们所产生的计算 | 阿咏个人站</title>
    <meta name="description" content="">
    <link rel="icon" href="/code.ico">
    
    <link rel="preload" href="/assets/css/0.styles.0a800f1d.css" as="style"><link rel="preload" href="/assets/js/app.5048320a.js" as="script"><link rel="preload" href="/assets/js/45.9df25c8a.js" as="script"><link rel="prefetch" href="/assets/js/10.cd6a8e3c.js"><link rel="prefetch" href="/assets/js/11.59f72704.js"><link rel="prefetch" href="/assets/js/12.95468371.js"><link rel="prefetch" href="/assets/js/13.d64c6a9d.js"><link rel="prefetch" href="/assets/js/14.8556ff67.js"><link rel="prefetch" href="/assets/js/15.5c925f3e.js"><link rel="prefetch" href="/assets/js/16.62df1127.js"><link rel="prefetch" href="/assets/js/17.036ccc86.js"><link rel="prefetch" href="/assets/js/18.dc2640dc.js"><link rel="prefetch" href="/assets/js/19.b739bdc1.js"><link rel="prefetch" href="/assets/js/2.25eacac4.js"><link rel="prefetch" href="/assets/js/20.b7d838af.js"><link rel="prefetch" href="/assets/js/21.f003d514.js"><link rel="prefetch" href="/assets/js/22.fa963af7.js"><link rel="prefetch" href="/assets/js/23.9c1a80fb.js"><link rel="prefetch" href="/assets/js/24.cd21ac3b.js"><link rel="prefetch" href="/assets/js/25.9a1f7546.js"><link rel="prefetch" href="/assets/js/26.5cb70340.js"><link rel="prefetch" href="/assets/js/27.8db44125.js"><link rel="prefetch" href="/assets/js/28.98a4f474.js"><link rel="prefetch" href="/assets/js/29.5d4423c4.js"><link rel="prefetch" href="/assets/js/3.766ef100.js"><link rel="prefetch" href="/assets/js/30.eb825da8.js"><link rel="prefetch" href="/assets/js/31.aff09cfd.js"><link rel="prefetch" href="/assets/js/32.64167269.js"><link rel="prefetch" href="/assets/js/33.a8f872b3.js"><link rel="prefetch" href="/assets/js/34.8baa3fbe.js"><link rel="prefetch" href="/assets/js/35.d511f248.js"><link rel="prefetch" href="/assets/js/36.dd62bd77.js"><link rel="prefetch" href="/assets/js/37.411b6138.js"><link rel="prefetch" href="/assets/js/38.a5dbb65a.js"><link rel="prefetch" href="/assets/js/39.b6516f1f.js"><link rel="prefetch" href="/assets/js/4.072f47ff.js"><link rel="prefetch" href="/assets/js/40.b667be2b.js"><link rel="prefetch" href="/assets/js/41.8aeacc88.js"><link rel="prefetch" href="/assets/js/42.389e2b00.js"><link rel="prefetch" href="/assets/js/43.94a188a3.js"><link rel="prefetch" href="/assets/js/44.abe09ad0.js"><link rel="prefetch" href="/assets/js/46.4a04e9b8.js"><link rel="prefetch" href="/assets/js/5.14864779.js"><link rel="prefetch" href="/assets/js/6.78ee331d.js"><link rel="prefetch" href="/assets/js/7.208625e1.js"><link rel="prefetch" href="/assets/js/8.27931739.js"><link rel="prefetch" href="/assets/js/9.7655da31.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0a800f1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">阿咏个人站</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/sicp/" class="nav-link router-link-active">Sicp</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/dsaa/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><a href="https://github.com/xkux8023" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/sicp/" class="nav-link router-link-active">Sicp</a></div><div class="nav-item"><a href="/javascript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/dsaa/" class="nav-link">数据结构与算法</a></div><div class="nav-item"><a href="https://github.com/xkux8023" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/sicp/" class="sidebar-link">Scheme 相关</a></li><li><a href="/sicp/sicp_1.html" class="sidebar-link">1.1 程序设计的基本元素</a></li><li><a href="/sicp/sicp_2.html" class="active sidebar-link">1.2 过程与它们所产生的计算</a><ul class="sidebar-sub-headers"></ul></li></ul> </div> <div class="page"> <div class="content"><h3 id="_1-2-过程与它们所产生的计算"><a href="#_1-2-过程与它们所产生的计算" aria-hidden="true" class="header-anchor">#</a> 1.2 过程与它们所产生的计算</h3> <h5 id="线性的递归和迭代"><a href="#线性的递归和迭代" aria-hidden="true" class="header-anchor">#</a> 线性的递归和迭代</h5> <p>; 递归写法：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">factorial</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token number">1</span>
      <span class="token punctuation">(</span><span class="token operator">*</span> n <span class="token punctuation">(</span><span class="token function">factorial</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 迭代写法：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">factorial</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token number">1</span> <span class="token number">1</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fact-iter</span> product counter max-count<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> counter max-count<span class="token punctuation">)</span>
      product
      <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token punctuation">(</span><span class="token operator">*</span> product counter<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> counter <span class="token number">1</span><span class="token punctuation">)</span> max-count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 迭代的过程如下：</span>
<span class="token punctuation">(</span><span class="token function">factorial</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span>   <span class="token number">1</span> <span class="token number">1</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span>   <span class="token number">1</span> <span class="token number">2</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span>   <span class="token number">2</span> <span class="token number">3</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span>   <span class="token number">6</span> <span class="token number">4</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span>  <span class="token number">24</span> <span class="token number">5</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token number">120</span> <span class="token number">6</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token number">720</span> <span class="token number">7</span> <span class="token number">6</span><span class="token punctuation">)</span>
⇒ <span class="token number">720</span>

</code></pre></div><p>; 隐藏内部实现的迭代写法：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">factorial</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">iter</span> product counter<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> counter n<span class="token punctuation">)</span>
        product
        <span class="token punctuation">(</span><span class="token function">iter</span> <span class="token punctuation">(</span><span class="token operator">*</span> product counter<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> counter <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">iter</span> <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="9"><li>习题 1.9 答案：用代换模型展示求值 <code>(+ 4 5)</code> 所产生的计算过程（递归 或者 迭代）</li></ol> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">plus</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> a <span class="token number">0</span><span class="token punctuation">)</span>
      b
      <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token function">dec</span> a<span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 递归过程如下：</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token number">0</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token punctuation">(</span><span class="token function">inc</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">inc</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token number">9</span>
</code></pre></div><div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">plus</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> a <span class="token number">0</span><span class="token punctuation">)</span>
      b
      <span class="token punctuation">(</span><span class="token function">plus</span> <span class="token punctuation">(</span><span class="token function">dec</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">inc</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 递归过程如下：</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">3</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">2</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">1</span> <span class="token number">8</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">plus</span> <span class="token number">0</span> <span class="token number">9</span><span class="token punctuation">)</span>
<span class="token number">9</span>
</code></pre></div><p>; 斐波那契的递归过程：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fib</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
    	  <span class="token punctuation">(</span><span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">fib</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    			       <span class="token punctuation">(</span><span class="token function">fib</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 斐波那契的迭代过程：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fib</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">fib-iter</span> <span class="token number">1</span> <span class="token number">0</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fib-iter</span> a b count<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> count <span class="token number">0</span><span class="token punctuation">)</span>
      b
      <span class="token punctuation">(</span><span class="token function">fib-iter</span> <span class="token punctuation">(</span><span class="token operator">+</span> a b<span class="token punctuation">)</span> a <span class="token punctuation">(</span><span class="token operator">-</span> count <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 将总数为 a 的现金换成 n 种硬币的不同方式的数目等于</p> <ul><li><p>将现金数 a 换成除第一种硬币之外的所有其他硬币的不同方式数目，加上</p></li> <li><p>将现金数 a-d 换成所有种类的硬币的不同方式数目，其中 d 是第一种硬币的币值</p></li> <li><p>如果 a 就是 0，应该算作是有 1 种换零钱的方式</p></li> <li><p>如果 a 小于 0，应该算作是有 0 种换零钱的方式</p></li> <li><p>如果 n 是 0， 应该算作是有 0 种换零钱的方式</p></li></ul> <p>; 将上述描述翻译为一个递归过程：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">count-change</span> amount<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">cc</span> amount <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">cc</span> amount kinds-of-coins<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> amount <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">or</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span> amount <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">cc</span> amount <span class="token punctuation">(</span><span class="token operator">-</span> kinds-of-coins <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        		 <span class="token punctuation">(</span><span class="token function">cc</span> <span class="token punctuation">(</span><span class="token operator">-</span> amount <span class="token punctuation">(</span><span class="token function">first-denomination</span> kinds-of-coins<span class="token punctuation">)</span><span class="token punctuation">)</span> kinds-of-coins<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 过程 `first-denomination` 以可用的硬币种数作为输入，返回第一种硬币的币值</span>
<span class="token comment">;（此处认为硬币已经从小到大排序好）</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">first-denomination</span> kinds-of-coins<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">4</span><span class="token punctuation">)</span> <span class="token number">25</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> kinds-of-coins <span class="token number">5</span><span class="token punctuation">)</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="11"><li>习题 1.11 答案：</li></ol> <ul><li>如果 <code>n &lt; 3</code>， 那么 <code>f(n) = n</code></li> <li>如果 <code>n &gt;= 3</code>， 那么 <code>f(n) = f(n-1)+2f(n-1)+3f(n-3)</code></li></ul> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token comment">; 递归实现的计算过程</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span> n <span class="token number">3</span><span class="token punctuation">)</span>
      n
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token function">f</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      	 <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">(</span><span class="token function">f</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      	 <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">3</span> <span class="token punctuation">(</span><span class="token function">f</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 迭代实现的计算过程</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">(</span><span class="token function">f-iter</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f-iter</span> a b c i n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> i n<span class="token punctuation">)</span>
      c
      <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">2</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">3</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span>
      			 a
      			 b
      			 <span class="token punctuation">(</span><span class="token operator">+</span> i <span class="token number">1</span><span class="token punctuation">)</span>
      			 n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><ol start="12"><li>习题 1.12 答案：帕斯卡三角形的各个元素之间的关系</li></ol> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-scheme"><code>row:
<span class="token number">0</span>        <span class="token number">1</span>
<span class="token number">1</span>       <span class="token number">1</span> <span class="token number">1</span>
<span class="token number">2</span>      <span class="token number">1</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">3</span>     <span class="token number">1</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">1</span>
<span class="token number">4</span>    <span class="token number">1</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">4</span> <span class="token number">1</span>
<span class="token number">5</span>   . . . . . .
col: <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span>
</code></pre></div><p>; 使用 pascal(row, col) 代表第 row 行和第 col 列上的元素的值，可以得出一些性质</p> <ul><li>每个 pascal(row, col) 由 pascal(row-1, col-1) (左上边的元素)和 pascal(row-1, col) (右上边的元素)组成</li> <li>当 col 等于 0 (最左边元素)，或者 row 等于 col (最右边元素)时， pascal(row, col) 等于 1</li></ul> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token comment">; 递归实现</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pascal</span> row col<span class="token punctuation">)</span>
	<span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> col row<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">error</span> <span class="token string">&quot;unvalid col value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		  <span class="token punctuation">(</span><span class="token function">or</span> <span class="token punctuation">(</span><span class="token operator">=</span> col <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token operator">=</span> col row<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
	      <span class="token punctuation">(</span><span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">pascal</span> <span class="token punctuation">(</span><span class="token operator">-</span> row <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">-</span> col <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	      		   <span class="token punctuation">(</span><span class="token function">pascal</span> <span class="token punctuation">(</span><span class="token operator">-</span> row <span class="token number">1</span><span class="token punctuation">)</span> col<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">; 迭代实现</span>
<span class="token comment">; 使用帕斯卡三角形的另一个公式来计算帕斯卡三角形的元素：(row col) =  row! / (col!*(row-col)!)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">factorial</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token number">1</span> <span class="token number">1</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fact-iter</span> product counter max-count<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> counter max-count<span class="token punctuation">)</span>
      product
      <span class="token punctuation">(</span><span class="token function">fact-iter</span> <span class="token punctuation">(</span><span class="token operator">*</span> product counter<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> counter <span class="token number">1</span><span class="token punctuation">)</span> max-count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pascal</span> row col<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">/</span> <span class="token punctuation">(</span><span class="token function">factorial</span> row<span class="token punctuation">)</span>
       <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">factorial</span> col<span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token function">factorial</span> <span class="token punctuation">(</span><span class="token operator">-</span> row col<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h5 id="求幂"><a href="#求幂" aria-hidden="true" class="header-anchor">#</a> 求幂</h5> <ol start="16"><li>习题 1.16</li></ol> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">expt-iter</span> b counter product<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> counter <span class="token number">0</span><span class="token punctuation">)</span>
      <span class="token number">1</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">even?</span> counter<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">expt-iter</span> <span class="token punctuation">(</span><span class="token function">square</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">/</span> n <span class="token number">2</span><span class="token punctuation">)</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">odd?</span> counter<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">expt-iter</span> b <span class="token punctuation">(</span><span class="token operator">-</span> counter <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span> b product<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="17"><li>习题 1.17</li></ol> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">double</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">+</span> n n<span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">halve</span> n<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">/</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">multi</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> b <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">even?</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">double</span> <span class="token punctuation">(</span><span class="token function">multi</span> a <span class="token punctuation">(</span><span class="token function">halve</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">odd?</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token punctuation">(</span><span class="token function">multi</span> a <span class="token punctuation">(</span><span class="token operator">-</span> b <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="18"><li>习题 1.18</li></ol> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">multi</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">multi-iter</span> a b <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">multi-iter</span> a b product<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> b <span class="token number">0</span><span class="token punctuation">)</span> product<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">even?</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">multi-iter</span> <span class="token punctuation">(</span><span class="token function">double</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">halve</span> b<span class="token punctuation">)</span> product<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">odd?</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">multi-iter</span> a <span class="token punctuation">(</span><span class="token operator">-</span> b <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> a product<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="最大公约数"><a href="#最大公约数" aria-hidden="true" class="header-anchor">#</a> 最大公约数</h5> <p>; 如果 r 是 a 除以 b 的余数，那么 a 和 b 的公约数正好也是 b 和 r 的公约数： <code>GCD(a, b) = GCD(b, r)</code></p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-scheme"><code>
<span class="token comment">; 欧几里德算法</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">gcd</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> b <span class="token number">0</span><span class="token punctuation">)</span>
      a
      <span class="token punctuation">(</span><span class="token function">gcd</span> b <span class="token punctuation">(</span><span class="token function">reminder</span> a b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="素数检测"><a href="#素数检测" aria-hidden="true" class="header-anchor">#</a> 素数检测</h5> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">smallest-divisor</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">find-divisor</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">find-divisor</span> n test-divisor<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token function">square</span> test-divisor<span class="token punctuation">)</span> n<span class="token punctuation">)</span> n<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">divides?</span> test-divisor<span class="token punctuation">)</span> test-divisor<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token function">find-divisor</span> n <span class="token punctuation">(</span><span class="token operator">+</span> test-divisor <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">divides?</span>  a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">reminder</span> b a<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 也可以如下检测一个数是否是素数： n 是素数，当且仅当它是自己的最小因子</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">prime?</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token punctuation">(</span><span class="token function">smallest-divisor</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="费马检测"><a href="#费马检测" aria-hidden="true" class="header-anchor">#</a> 费马检测</h5> <p>下面的过程计算一个的幂对另一个数取模的结果</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">expmond</span> base exp m<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> exp <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">even?</span> exp<span class="token punctuation">)</span> 
         <span class="token punctuation">(</span><span class="token function">remainder</span> <span class="token punctuation">(</span><span class="token function">square</span> <span class="token punctuation">(</span><span class="token function">expmond</span> base <span class="token punctuation">(</span><span class="token operator">/</span> exp <span class="token number">2</span><span class="token punctuation">)</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token punctuation">(</span><span class="token keyword">else</span>
         <span class="token punctuation">(</span><span class="token function">remainder</span> <span class="token punctuation">(</span><span class="token operator">*</span> base <span class="token punctuation">(</span><span class="token function">expmond</span> base <span class="token punctuation">(</span><span class="token operator">-</span> exp <span class="token number">1</span><span class="token punctuation">)</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span> m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fermat-test</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">try-it</span> a<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">expmond</span> a n n<span class="token punctuation">)</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">try-it</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token function">random</span> <span class="token punctuation">(</span><span class="token operator">-</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">fast-prime?</span> n times<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> times <span class="token number">0</span><span class="token punctuation">)</span> true<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">fermat</span> n<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">fast-prime?</span> n <span class="token punctuation">(</span><span class="token operator">-</span> times <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword">else</span> false<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         
</code></pre></div><p>; 对于整数 n 调用下面的 timed-prime-test 过程时，将打印出 n 并检查 n 是否为素数。如果 n 是素数，过程将打印三个 * ,随后是执行这一检查所用的时间量。</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">timed-prime-test</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">newline</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">display</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">start-prime-test</span> n <span class="token punctuation">(</span><span class="token function">runtime</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">start-prime-test</span> n start-time<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">prime?</span> n<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token function">report-prime</span> <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">runtime</span><span class="token punctuation">)</span> start-time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">report-prime</span> elapsed-time<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">display</span> <span class="token string">&quot; *** &quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">display</span> elapsed-time<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="22"><li>习题 1.22
要写出 search-for-primes 函数，我们首先需要解决以下几个子问题：</li></ol> <p>1-写一个能产生下一个奇数的函数，用于生成连续奇数</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">next-odd</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">odd?</span> n<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">2</span> n<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">1</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>2-写一个检查给定数字是否为素数的函数</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">prime?</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token punctuation">(</span><span class="token function">smallest-divisor</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">smallest-divisor</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">find-divisor</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">find-divisor</span> n test-divisor<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token function">square</span> test-divisor<span class="token punctuation">)</span> n<span class="token punctuation">)</span> n<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">divides?</span> test-divisor n<span class="token punctuation">)</span> test-divisor<span class="token punctuation">)</span>
        else <span class="token punctuation">(</span><span class="token function">find-divisor</span> n <span class="token punctuation">(</span><span class="token operator">+</span> test-divisor <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">divides?</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">remainder</span> b a<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>3-写一个函数，给定它一个参数 n ，可以生成大于等于 n 的三个素数，或者更一般地，对于一个函数，给定它两个参数 n 和 count ，可以生成 count 个大于等于 n 的素数</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">continue-primes</span> n count<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">=</span> count <span class="token number">0</span><span class="token punctuation">)</span> display <span class="token string">&quot;are primes&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">prime?</span> n<span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token function">display</span> n<span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token function">newline</span><span class="token punctuation">)</span>
          <span class="token punctuation">(</span><span class="token function">continue-primes</span> <span class="token punctuation">(</span><span class="token function">next-odd</span> n<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">-</span> count <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token keyword">else</span>
          <span class="token punctuation">(</span><span class="token function">continue-primes</span> <span class="token punctuation">(</span><span class="token function">next-odd</span> n<span class="token punctuation">)</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>4-测量寻找三个素数所需的时间</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">test-foo</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">start-time</span> <span class="token punctuation">(</span><span class="token function">real-time-clock</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">real-time-clock</span><span class="token punctuation">)</span> start-time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>5-组合起前面的 continue-primes 函数和 real-time-clock 函数，写出题目要求的 search-for-primes 函数了，这个函数接受参数 n ，找出大于等于 n 的三个素数，并且返回寻找素数所需的时间作为函数的返回值：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">search-for-primes</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">start-time</span> <span class="token punctuation">(</span><span class="token function">real-time-clock</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token function">continue-primes</span> n <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token function">real-time-clock</span><span class="token punctuation">)</span> start-time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol start="23"><li>习题 1.23</li></ol> <p>要完成这个练习，我们需要：</p> <p>1.写出 next 函数</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-scheme"><code><span class="token comment">;next 函数接受参数 n ，如果 n 为 2 ，那么返回 3 ，否则返回 n+2 ：</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">next</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">=</span> n <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token number">3</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> n <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>2.使用 next 函数重定义 find-divisor 函数</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">find-divisor</span> n test-divisor<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">cond</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token function">square</span> test-divisor<span class="token punctuation">)</span> n<span class="token punctuation">)</span> n<span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">divides?</span> test-divisor n<span class="token punctuation">)</span> test-divisor<span class="token punctuation">)</span>
        else <span class="token punctuation">(</span><span class="token function">find-divisor</span> n <span class="token punctuation">(</span><span class="token function">next</span> test-divisor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>3.使用新的 find-divisor 覆盖原来 search-for-primes 所使用的 find-divisor ，并使用一个文件来包裹它们，方便测试时使用</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div></div><pre class="language-scheme"><code><span class="token comment">; 先引入 练习 1.22 的 search-for-primes 函数，再引入新的 find-divisor 函数，覆盖原来旧的 find-divisor</span>
<span class="token punctuation">(</span><span class="token function">load</span> <span class="token string">&quot;22-search-for-primes.scm&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token function">load</span> <span class="token string">&quot;23-find-divisor.scm&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>4.使用新的 search-for-primes 进行测试，和原来的 search-for-primes 进行对比</p> <h5 id="用高阶函数做抽象"><a href="#用高阶函数做抽象" aria-hidden="true" class="header-anchor">#</a> 用高阶函数做抽象</h5> <ul><li>1.3.1-过程作为参数</li></ul> <p>; 计算从 a 到 b 的各个整数之和</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">sum-integers</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> a b<span class="token punctuation">)</span>
      <span class="token number">0</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token punctuation">(</span><span class="token function">sum-integers</span> <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token number">1</span><span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 计算给定范围内的整数的立方之和</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">sum-cubes</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> a b<span class="token punctuation">)</span>
      <span class="token number">0</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">cube</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">sum-cubes</span> <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token number">1</span><span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 计算下面的序列之和: <code>1/(1*3) + 1/(5*7) + 1/(9*11)+...</code></p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pi-sum</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> a b<span class="token punctuation">)</span>
      <span class="token number">0</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> 
        <span class="token punctuation">(</span><span class="token operator">/</span> <span class="token number">1.0</span> <span class="token punctuation">(</span><span class="token operator">*</span> a <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">pi-sum</span> <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token number">4</span><span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 通过填充下面模板的空位，产生上面的各个过程</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">&lt;name&gt;</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> a b<span class="token punctuation">)</span>
      <span class="token number">0</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">&lt;term&gt;</span> a<span class="token punctuation">)</span>
         <span class="token punctuation">(</span><span class="token function">&lt;name&gt;</span> <span class="token punctuation">(</span><span class="token function">&lt;next&gt;</span> a<span class="token punctuation">)</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 按照上面给出模式，去实现第一个求和的过程如下：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">sum</span> term a next b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&gt;</span> a b<span class="token punctuation">)</span>
      <span class="token number">0</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">term</span> a<span class="token punctuation">)</span>
         <span class="token punctuation">(</span><span class="token function">sum</span> term <span class="token punctuation">(</span><span class="token function">next</span> a<span class="token punctuation">)</span> next b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">inc</span> n<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> n <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">sum-cubes</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">sum</span> cube a inc b<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 计算从 1 到 10 的立方和：</span>
<span class="token punctuation">(</span><span class="token function">sum-cubes</span> <span class="token number">1</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">;3025  </span>
</code></pre></div><p>; 利用恒等函数帮助算出项值，就可以基于sum定义sum-integers:</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">identity</span> x<span class="token punctuation">)</span> x<span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">sum-integers</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">sum</span> identity a inc b<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 求出从 1 到 10 的整数和</span>
<span class="token punctuation">(</span><span class="token function">sum-integers</span> <span class="token number">1</span> <span class="token number">10</span><span class="token punctuation">)</span>       <span class="token comment">;55</span>

<span class="token comment">; 以同样方式定义 pi-sum:</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pi-sum</span> a b<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pi-term</span> x<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">/</span> <span class="token number">1.0</span> <span class="token punctuation">(</span><span class="token operator">*</span> x <span class="token punctuation">(</span><span class="token operator">+</span> x <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">pi-next</span> x<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">+</span> x <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">sum</span> pi-term a pi-next b<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; 计算 pai 的一个近似值</span>
<span class="token punctuation">(</span><span class="token operator">*</span> <span class="token number">8</span> <span class="token punctuation">(</span><span class="token function">pi-sum</span> <span class="token number">1</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">;3.139592655589783</span>
</code></pre></div><p>; 求出函数 f 在范围 a 和 b 之间的定积分的近似值的过程如下：</p> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">integral</span> f a b dx<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">add-dx</span> x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">+</span> x dx<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">sum</span> f <span class="token punctuation">(</span><span class="token operator">+</span> a <span class="token punctuation">(</span><span class="token operator">/</span> dx <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> add-dx b<span class="token punctuation">)</span> dx<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="lambda-表达式"><a href="#lambda-表达式" aria-hidden="true" class="header-anchor">#</a> lambda 表达式</h5> <div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-scheme"><code><span class="token comment">; 一般写法</span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f</span> x y<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f-helper</span> a b<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span> x <span class="token punctuation">(</span><span class="token function">square</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">(</span><span class="token operator">*</span> y b<span class="token punctuation">)</span>
       <span class="token punctuation">(</span><span class="token operator">*</span> a b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token function">f-helper</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token operator">*</span> x y<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">1</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; lambda 写法 </span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f</span> x y<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> <span class="token punctuation">(</span><span class="token function">a</span> b<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span> x <span class="token punctuation">(</span><span class="token function">square</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token punctuation">(</span><span class="token operator">*</span> y b<span class="token punctuation">)</span>
         <span class="token punctuation">(</span><span class="token operator">*</span> a b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token operator">*</span> x y<span class="token punctuation">)</span><span class="token punctuation">)</span> 
   <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">1</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">; let 写法            </span>
<span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">f</span> x y<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">a</span> <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token operator">*</span> x y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token function">b</span> <span class="token punctuation">(</span><span class="token operator">-</span> <span class="token number">1</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span> x <span class="token punctuation">(</span><span class="token function">square</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">(</span><span class="token operator">*</span> y b<span class="token punctuation">)</span>
       <span class="token punctuation">(</span><span class="token operator">*</span> a b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>; 下面可以比较下 lambda 与 js 的箭头函数的对比</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">average</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> c<span class="token operator">*</span>c
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">averageDamp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">average</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">averageDamp</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token comment">// 55</span>
</code></pre></div><div class="language-scheme extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-scheme"><code><span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">average-damp</span> f<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token keyword">lambda</span> <span class="token punctuation">(</span><span class="token function">x</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">average</span> x <span class="token punctuation">(</span><span class="token function">f</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">average-damp</span> square<span class="token punctuation">)</span> <span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment">; 55</span>
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/25/2019, 11:23:52 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sicp/sicp_1.html" class="prev">
          1.1 程序设计的基本元素
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.5048320a.js" defer></script><script src="/assets/js/45.9df25c8a.js" defer></script>
  </body>
</html>
